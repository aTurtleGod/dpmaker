<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
    <title>dpmaker - Data Pack Maker</title>
      <meta name="viewport" content="width=device-width, initial-scale=1">
        <!-- PWA Manifest -->
          <link rel="manifest" href="manifest.json">
            <style>
                body { font-family: Arial, sans-serif; margin: 2em; background: #f9f9f9; }
                    h1 { margin-bottom: 0.5em; }
                        nav { margin-bottom: 1.5em; }
                            nav button { margin-right: 0.5em; padding: 0.5em 1em; }
                                section { display: none; background: #fff; border-radius: 6px; box-shadow: 0 2px 8px #0001; padding: 1em; margin-bottom: 1em; }
                                    section.active { display: block; }
                                        label { display: block; margin: 1em 0 0.5em; }
                                            input, textarea, select { width: 100%; margin-bottom: 1em; }
                                                textarea { height: 100px; }
                                                    iframe { border: none; width: 100%; height: 600px; border-radius: 6px; }
                                                        .download-btn { margin-top: 1em; }
                                                          </style>
                                                          </head>
                                                          <body>
                                                            <h1>dpmaker - Data Pack Maker</h1>
                                                              <nav>
                                                                  <button onclick="showSection('mcmeta')">Pack.mcmeta</button>
                                                                      <button onclick="showSection('advancement')">Advancement</button>
                                                                          <button onclick="showSection('recipe')">Recipe</button>
                                                                              <button onclick="showSection('enchant')">Custom Enchant (Misode)</button>
                                                                                </nav>

                                                                                  <!-- Pack.mcmeta Generator -->
                                                                                    <section id="mcmeta" class="active">
                                                                                        <h2>Pack.mcmeta Generator</h2>
                                                                                            <form onsubmit="event.preventDefault(); generateMcmeta();">
                                                                                                  <label>Pack Name: <input type="text" id="packName" required></label>
                                                                                                        <label>Description: <input type="text" id="packDesc" required></label>
                                                                                                              <label>Pack Format: <input type="number" id="packFormat" value="10" required></label>
                                                                                                                    <button type="submit">Generate</button>
                                                                                                                        </form>
                                                                                                                            <label>Generated pack.mcmeta:</label>
                                                                                                                                <textarea id="mcmetaOutput" readonly></textarea>
                                                                                                                                    <button class="download-btn" onclick="downloadFile('pack.mcmeta', document.getElementById('mcmetaOutput').value)">Download pack.mcmeta</button>
                                                                                                                                      </section>

                                                                                                                                        <!-- Advancement Generator -->
                                                                                                                                          <section id="advancement">
                                                                                                                                              <h2>Advancement Generator</h2>
                                                                                                                                                  <form onsubmit="event.preventDefault(); generateAdvancement();">
                                                                                                                                                        <label>Advancement Name: <input type="text" id="advName" required></label>
                                                                                                                                                              <label>Description: <input type="text" id="advDesc" required></label>
                                                                                                                                                                    <label>Icon (item id): <input type="text" id="advIcon" value="minecraft:diamond" required></label>
                                                                                                                                                                          <button type="submit">Generate</button>
                                                                                                                                                                              </form>
                                                                                                                                                                                  <label>Generated advancement.json:</label>
                                                                                                                                                                                      <textarea id="advOutput" readonly></textarea>
                                                                                                                                                                                          <button class="download-btn" onclick="downloadFile('advancement.json', document.getElementById('advOutput').value)">Download advancement.json</button>
                                                                                                                                                                                            </section>

                                                                                                                                                                                              <!-- Recipe Generator -->
                                                                                                                                                                                                <section id="recipe">
                                                                                                                                                                                                    <h2>Recipe Generator</h2>
                                                                                                                                                                                                        <form onsubmit="event.preventDefault(); generateRecipe();">
                                                                                                                                                                                                              <label>Recipe Name: <input type="text" id="recName" required></label>
                                                                                                                                                                                                                    <label>Result Item (item id): <input type="text" id="recResult" value="minecraft:diamond" required></label>
                                                                                                                                                                                                                          <label>Result Count: <input type="number" id="recCount" value="1" required></label>
                                                                                                                                                                                                                                <label>Pattern (comma separated, e.g. "###,# #,###"): <input type="text" id="recPattern" value="###,# #,###" required></label>
                                                                                                                                                                                                                                      <label>Key (e.g. #:minecraft:stone): <input type="text" id="recKey" value="#:minecraft:stone" required></label>
                                                                                                                                                                                                                                            <button type="submit">Generate</button>
                                                                                                                                                                                                                                                </form>
                                                                                                                                                                                                                                                    <label>Generated recipe.json:</label>
                                                                                                                                                                                                                                                        <textarea id="recOutput" readonly></textarea>
                                                                                                                                                                                                                                                            <button class="download-btn" onclick="downloadFile('recipe.json', document.getElementById('recOutput').value)">Download recipe.json</button>
                                                                                                                                                                                                                                                              </section>

                                                                                                                                                                                                                                                                <!-- Misode Custom Enchant Generator (Embedded) -->
                                                                                                                                                                                                                                                                  <section id="enchant">
                                                                                                                                                                                                                                                                      <h2>Custom Enchantment Generator (by Misode)</h2>
                                                                                                                                                                                                                                                                          <p>
                                                                                                                                                                                                                                                                                Use the embedded Misode Enchantment Generator below to create custom enchantments.<br>
                                                                                                                                                                                                                                                                                      <a href="https://misode.github.io/enchantment/" target="_blank">Open in new tab</a>
                                                                                                                                                                                                                                                                                          </p>
                                                                                                                                                                                                                                                                                              <iframe src="https://misode.github.io/enchantment/" title="Misode Enchantment Generator"></iframe>
                                                                                                                                                                                                                                                                                                </section>

                                                                                                                                                                                                                                                                                                  <script>
                                                                                                                                                                                                                                                                                                      // Navigation logic
                                                                                                                                                                                                                                                                                                          function showSection(id) {
                                                                                                                                                                                                                                                                                                                document.querySelectorAll('section').forEach(sec => sec.classList.remove('active'));
                                                                                                                                                                                                                                                                                                                      document.getElementById(id).classList.add('active');
                                                                                                                                                                                                                                                                                                                          }

                                                                                                                                                                                                                                                                                                                              // Pack.mcmeta generator
                                                                                                                                                                                                                                                                                                                                  function generateMcmeta() {
                                                                                                                                                                                                                                                                                                                                        const name = document.getElementById('packName').value;
                                                                                                                                                                                                                                                                                                                                              const desc = document.getElementById('packDesc').value;
                                                                                                                                                                                                                                                                                                                                                    const format = document.getElementById('packFormat').value;
                                                                                                                                                                                                                                                                                                                                                          const mcmeta = {
                                                                                                                                                                                                                                                                                                                                                                  pack: {
                                                                                                                                                                                                                                                                                                                                                                            pack_format: parseInt(format),
                                                                                                                                                                                                                                                                                                                                                                                      description: desc
                                                                                                                                                                                                                                                                                                                                                                                              }
                                                                                                                                                                                                                                                                                                                                                                                                    };
                                                                                                                                                                                                                                                                                                                                                                                                          document.getElementById('mcmetaOutput').value = JSON.stringify(mcmeta, null, 2);
                                                                                                                                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                                                                                                                                  // Advancement generator
                                                                                                                                                                                                                                                                                                                                                                                                                      function generateAdvancement() {
                                                                                                                                                                                                                                                                                                                                                                                                                            const name = document.getElementById('advName').value;
                                                                                                                                                                                                                                                                                                                                                                                                                                  const desc = document.getElementById('advDesc').value;
                                                                                                                                                                                                                                                                                                                                                                                                                                        const icon = document.getElementById('advIcon').value;
                                                                                                                                                                                                                                                                                                                                                                                                                                              const adv = {
                                                                                                                                                                                                                                                                                                                                                                                                                                                      display: {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                title: name,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                          description: desc,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    icon: { item: icon }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            },
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    criteria: {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              trigger: { trigger: "minecraft:tick" }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            };
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  document.getElementById('advOutput').value = JSON.stringify(adv, null, 2);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          // Recipe generator
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              function generateRecipe() {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const name = document.getElementById('recName').value;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          const result = document.getElementById('recResult').value;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const count = parseInt(document.getElementById('recCount').value);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      const pattern = document.getElementById('recPattern').value.split(',');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            const keyInput = document.getElementById('recKey').value.split(',');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const key = {};
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        keyInput.forEach(pair => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                const [char, item] = pair.split(':');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        if (char && item) key[char] = { item: item.trim() };
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    const recipe = {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            type: "minecraft:crafting_shaped",
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    pattern: pattern,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            key: key,
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    result: { item: result, count: count }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          };
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                document.getElementById('recOutput').value = JSON.stringify(recipe, null, 2);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        // Download helper
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            function downloadFile(filename, content) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  const blob = new Blob([content], {type: 'application/json'});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                        const link = document.createElement('a');
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              link.href = URL.createObjectURL(blob);
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    link.download = filename;
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          link.click();
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }

                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                  // PWA Service Worker registration (optional, for offline support)
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                      if ('serviceWorker' in navigator) {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            window.addEventListener('load', () => {
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                    navigator.serviceWorker.register('service-worker.js').catch(() => {});
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                          });
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                              }
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </script>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </body>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                </html>
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                